(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["asignaciones"],{ca38:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:""}},[i("v-layout",{attrs:{row:""}},[i("v-text-field",{staticClass:"pa-0",attrs:{color:"blue darken-4","background-color":"blue lighten-5","append-icon":"search",label:"Buscar...","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-data-table",{attrs:{"disable-initial-sort":"",headers:t.dataTable.headers,items:t.dataTable.estaciones,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.nro_estacion))]),i("td",[t._v(t._s(e.item.nro_counter_c))]),i("td",[t._v(t._s(e.item.nro_counter_r))]),i("td",["f"===e.item.tipo_estacion?i("span",[t._v("Fija")]):i("span",[t._v("Móvil")])]),i("td",[t._v(t._s(e.item.direccion))]),i("td",[t._v(t._s(e.item.tecnico?e.item.tecnico.nombre:""))]),i("td",[t._v(t._s(e.item.notario?e.item.notario.nombre:""))]),i("td",[t._v(t._s(e.item.notario?e.item.notario.ci:""))]),i("td",[t._v(t._s(e.item.notario?e.item.notario.extension:""))]),i("td",[t._v(t._s(e.item.notario?e.item.notario.celular:""))]),i("td",[t._v(t._s(e.item.notario?e.item.notario.empresa_telefonica:""))]),i("td",{staticClass:"justify-center"},[i("v-btn",{staticClass:"square",attrs:{color:"info",flat:"",title:"Accesorios"},on:{click:function(i){return t.editEstacion(e.item)}}},[i("v-icon",[t._v("edit")])],1),i("v-btn",{staticClass:"square",attrs:{color:"info",flat:"",title:"Imprimir"},on:{click:function(i){return t.getEquiposByEstacion(e.item)}}},[i("v-icon",[t._v("print")])],1)],1)]}}])},[i("v-alert",{attrs:{value:!0,color:"error",icon:"warning"},scopedSlots:t._u([{key:"no-results",fn:function(){return[t._v('\n            Your search for "'+t._s(t.search)+'" found no results.\n        ')]},proxy:!0}])})],1),i("component-asignacion",{ref:"componentsAsignacion",attrs:{"edit-data":t.selectedEstacion},on:{registerSuccess:t.getEstaciones}}),i("component-print-asignacion",{ref:"componentPrintAsignacion",attrs:{"print-data":t.printEstacion}})],1)},n=[],a=i("c09d"),s=i("bc3a"),c=i.n(s),r=i("7acb"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",{staticClass:"grey lighten-2"},[i("v-layout",{attrs:{"align-center":"","justify-space-between":"","fill-height":""}},[i("span",{staticClass:"title"},[t._v("Asignar")]),i("v-btn",{staticClass:"square",attrs:{color:"secondary",flat:""},on:{click:function(e){t.dialog=!t.dialog}}},[i("v-icon",[t._v("close")])],1)],1)],1),i("v-card-text",[i("v-container",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{color:"blue darken-4","background-color":"blue lighten-5",box:"",rules:t.rules.ci,label:"Dirección"},model:{value:t.estacion.direccion,callback:function(e){t.$set(t.estacion,"direccion",e)},expression:"estacion.direccion"}}),i("v-autocomplete",{attrs:{color:"blue darken-4",box:"","background-color":"blue lighten-5",items:t.tecnicos,loading:t.searchTecnico.isLoading,"search-input":t.inputTecnico,"hide-no-data":"","hide-selected":"","item-text":"nombre","item-value":"id",label:"Técnico",placeholder:"Comience a escribir para buscar","return-object":""},on:{"update:searchInput":function(e){t.inputTecnico=e},"update:search-input":function(e){t.inputTecnico=e}},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item;e.index;return[i("v-layout",{attrs:{"align-center":"","justify-space-between":"","fill-height":""}},[i("v-flex",{attrs:{xs8:""}},[i("span",{staticClass:"v-text-field--full-width"},[t._v(t._s(o.nombre))])]),i("v-flex",{staticClass:"text-xs-right"},[i("span",[t._v(t._s(o.ci))])])],1)]}}]),model:{value:t.searchTecnico.tecnico,callback:function(e){t.$set(t.searchTecnico,"tecnico",e)},expression:"searchTecnico.tecnico"}}),i("v-autocomplete",{attrs:{color:"blue darken-4",box:"","background-color":"blue lighten-5",items:t.notarios,loading:t.searchTecnico.isLoading,"search-input":t.inputNotario,"hide-no-data":"","hide-selected":"","item-text":"nombre","item-value":"id",label:"Notario",placeholder:"Comience a escribir para buscar","return-object":""},on:{"update:searchInput":function(e){t.inputNotario=e},"update:search-input":function(e){t.inputNotario=e}},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item;e.index;return[i("v-layout",{attrs:{"align-center":"","justify-space-between":"","fill-height":""}},[i("v-flex",{attrs:{xs8:""}},[i("span",{staticClass:"v-text-field--full-width"},[t._v(t._s(o.nombre))])]),i("v-flex",{staticClass:"text-xs-right"},[i("span",[t._v(t._s(o.ci))])])],1)]}}]),model:{value:t.searchNotario.notario,callback:function(e){t.$set(t.searchNotario,"notario",e)},expression:"searchNotario.notario"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",outline:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cerrar")]),i("v-btn",{staticClass:"text",attrs:{color:"info",depressed:""},on:{click:t.submit}},[t._v("Enviar")])],1)],1)],1)],1)},u=[],d=i("fac0"),h={props:{editData:{default:null}},data:()=>({dialog:!1,valid:!0,rules:{ci:[t=>!!t||"Cédula de identidad es requerido"],extension:[t=>!!t||"Extensión requerido"],nombre:[t=>!!t||"Nombre es requerido"],apellido1:[t=>!!t||"Primer Apellido es requerido"],celular:[t=>!!t||"Celular es requerido"]},searchTecnico:{descriptionLimit:60,entries:[],isLoading:!1,tecnico:null,count:null},inputTecnico:null,searchNotario:{descriptionLimit:60,entries:[],isLoading:!1,notario:null,count:null},inputNotario:null,estacion:new d["a"],selectedEstacion:null}),watch:{inputTecnico(t){this.tecnicos.length>0||this.searchTecnico.isLoading||(this.searchTecnico.isLoading=!0,fetch(this.$urlApi.resourcesTecnico).then(t=>t.json()).then(t=>{this.searchTecnico.count=t,this.searchTecnico.entries=t}).catch(t=>{console.log(t)}).finally(()=>this.searchTecnico.isLoading=!1))},inputNotario(t){this.notarios.length>0||this.searchNotario.isLoading||(this.searchNotario.isLoading=!0,fetch(this.$urlApi.resourcesNotario).then(t=>t.json()).then(t=>{this.searchNotario.count=t,this.searchNotario.entries=t}).catch(t=>{console.log(t)}).finally(()=>this.searchNotario.isLoading=!1))}},computed:{tecnicos(){return this.searchTecnico.entries.map(t=>{const e=t.nombre.length>this.searchTecnico.descriptionLimit?t.nombre.slice(0,this.searchTecnico.descriptionLimit)+"...":t.nombre;return Object.assign({},t,{nombre:e})})},notarios(){return this.searchNotario.entries.map(t=>{const e=t.nombre.length>this.searchNotario.descriptionLimit?t.nombre.slice(0,this.searchNotario.descriptionLimit)+"...":t.nombre;return Object.assign({},t,{nombre:e})})}},methods:{submit:function(){this.$refs.form.validate()&&this.update()},update(){let t=this.estacion;this.searchTecnico.tecnico&&(t.tecnico_id=this.searchTecnico.tecnico.id),this.searchNotario.notario&&(t.notario_id=this.searchNotario.notario.id),c.a.put(this.$urlApi.resourcesEstacion+"/"+t.id,t).then(t=>{this.$toastr("success","","TAREA REALIZADA CON ÉXITO"),this.dialog=!1,this.$nextTick(()=>{this.estacion=new d["a"],this.searchNotario.notario=null,this.valid=!0}),this.$emit("registerSuccess")}).catch(t=>{this.$notifyErrors(t)})},openDialog(){Object.assign(this.estacion,this.editData),this.dialog=!0}}},p=h,m=i("2877"),v=Object(m["a"])(p,l,u,!1,null,null,null),b=v.exports,g=i("712b"),f={components:{ComponentAccesorio:r["a"],ComponentEquipo:a["a"],ComponentAsignacion:b,ComponentPrintAsignacion:g["a"]},mounted(){this.$nextTick(()=>{this.getEstaciones()})},data(){return{dataTable:{headers:[{text:"Nro Estación",value:"nro_estacion"},{text:"Nro Counter C",value:"nro_counter_c"},{text:"Nro Counter R",value:"nro_counter_r"},{text:"Tipo de estación",value:"tipo_estacion"},{text:"Dirección",value:"direccion"},{text:"Tecnico",value:"tecnico.nombre_completo"},{text:"Notario",value:"notario.nombre_completo"},{text:"C.I.",value:"notario.ci"},{text:"Ext.",value:"notario.extension"},{text:"Celular",value:"notario.extension"},{text:"Emp. Tel.",value:"notario.empresa_telefonica"},{text:"",sortable:!1,value:""}],estaciones:[]},search:"",selectedEstacion:null,printEstacion:null}},computed:{},methods:{getEstaciones:function(){c.a.get(this.$urlApi.resourcesEstacion).then(t=>{this.dataTable.estaciones=t.data}).catch(t=>{console.log("error servidor")})},editEstacion(t){this.selectedEstacion=t,this.$nextTick(()=>{this.$refs.componentsAsignacion.openDialog()})},getEquiposByEstacion(t){c.a.get(this.$urlApi.getEquiposByEstacion+t.id).then(e=>{this.printEstacion=t,this.printEstacion.equipos=e.data}).catch(t=>{console.log("error servidor")}).then(t=>{this.$refs.componentPrintAsignacion.printAsignacion()})}}},_=f,x=Object(m["a"])(_,o,n,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=asignaciones.458c7980.js.map